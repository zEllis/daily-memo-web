<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Memos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .config-panel {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .config-panel h3 {
            margin-bottom: 15px;
            color: #333;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #555;
            font-weight: 500;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 14px;
        }

        .form-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5568d3;
        }

        .btn-success {
            background: #48bb78;
            color: white;
        }

        .btn-success:hover {
            background: #38a169;
        }

        .btn-danger {
            background: #f56565;
            color: white;
        }

        .btn-danger:hover {
            background: #e53e3e;
        }

        .notes-list {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .note-item {
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            transition: all 0.3s;
        }

        .note-item:hover {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .note-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .note-title {
            font-size: 1.2em;
            font-weight: 600;
            color: #2d3748;
        }

        .note-meta {
            display: flex;
            gap: 10px;
            font-size: 0.9em;
            color: #718096;
            margin-bottom: 10px;
        }

        .note-content {
            color: #4a5568;
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .note-actions {
            display: flex;
            gap: 10px;
        }

        .badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 0.85em;
            font-weight: 500;
        }

        .badge-todo {
            background: #fef5e7;
            color: #d68910;
        }

        .badge-study {
            background: #ebf8ff;
            color: #2c5282;
        }

        .badge-work {
            background: #f0fff4;
            color: #22543d;
        }

        .badge-life {
            background: #fef2f2;
            color: #742a2a;
        }

        .priority {
            color: #f6ad55;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #718096;
        }

        .empty {
            text-align: center;
            padding: 40px;
            color: #a0aec0;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }

        .modal-content {
            background: white;
            max-width: 600px;
            margin: 50px auto;
            padding: 30px;
            border-radius: 10px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-header h2 {
            color: #2d3748;
        }

        .close {
            font-size: 28px;
            cursor: pointer;
            color: #a0aec0;
        }

        .close:hover {
            color: #4a5568;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“ DailyMemo</h1>
            <p>æ¯æ—¥ç¬”è®°æé†’å·¥å…·</p>
        </div>

        <!-- API é…ç½® -->
        <div class="config-panel">
            <h3>ğŸ” èº«ä»½éªŒè¯</h3>
            <div class="form-group">
                <label>API Tokenï¼ˆå¿…å¡«ï¼‰</label>
                <input type="password" id="apiToken" placeholder="è¯·è¾“å…¥æ‚¨çš„ API Token">
            </div>
            <button class="btn btn-primary" onclick="saveConfig()">å¼€å§‹ä½¿ç”¨</button>
            <button class="btn btn-success" onclick="testPush()">æµ‹è¯•æ¨é€</button>
            <button class="btn btn-success" onclick="pushNow()">ç«‹å³æ¨é€ä»Šæ—¥ç¬”è®°</button>
        </div>

        <!-- æ–°å¢ç¬”è®° -->
        <div class="config-panel">
            <h3>â• æ–°å¢ç¬”è®°</h3>
            <div class="form-group">
                <label>æ ‡é¢˜</label>
                <input type="text" id="newTitle" placeholder="è¾“å…¥ç¬”è®°æ ‡é¢˜">
            </div>
            <div class="form-group">
                <label>å†…å®¹</label>
                <textarea id="newContent" placeholder="è¾“å…¥ç¬”è®°å†…å®¹"></textarea>
            </div>
            <div class="form-group">
                <label>åˆ†ç±»</label>
                <select id="newCategory">
                    <option value="todo">å¾…åŠäº‹é¡¹</option>
                    <option value="study">å­¦ä¹ ç¬”è®°</option>
                    <option value="work">å·¥ä½œç›¸å…³</option>
                    <option value="life">ç”Ÿæ´»æ‚è®°</option>
                    <option value="other">å…¶ä»–</option>
                </select>
            </div>
            <div class="form-group">
                <label>ä¼˜å…ˆçº§</label>
                <select id="newPriority">
                    <option value="1">1 - å¾ˆä½</option>
                    <option value="2">2 - è¾ƒä½</option>
                    <option value="3" selected>3 - ä¸­ç­‰</option>
                    <option value="4">4 - è¾ƒé«˜</option>
                    <option value="5">5 - å¾ˆé«˜</option>
                </select>
            </div>
            <div class="form-group">
                <label>æé†’æ–¹å¼</label>
                <select id="newRemindType" onchange="toggleRemindType('new')">
                    <option value="times">æŒ‰æ—¶é—´ç‚¹æé†’</option>
                    <option value="cron">æŒ‰ Cron è¡¨è¾¾å¼æé†’</option>
                </select>
            </div>
            <div class="form-group" id="newRemindTimesGroup">
                <label>æé†’æ—¶é—´ï¼ˆå¤šä¸ªæ—¶é—´ç”¨é€—å·åˆ†éš”ï¼Œå¦‚ï¼š08:10, 12:30, 20:00ï¼‰</label>
                <input type="text" id="newRemindTimes" placeholder="08:10, 12:30, 20:00" value="08:10, 12:30, 20:00">
                <small style="color: #718096;">é»˜è®¤ï¼šæ—©ä¸Š 08:10ã€ä¸­åˆ 12:30ã€æ™šä¸Š 20:00</small>
            </div>
            <div class="form-group" id="newCronGroup" style="display: none;">
                <label>Cron è¡¨è¾¾å¼</label>
                <input type="text" id="newCronExpression" placeholder="0 9 1 * *">
                <small style="color: #718096;">
                    æ ¼å¼ï¼šåˆ†é’Ÿ å°æ—¶ æ—¥æœŸ æœˆä»½ æ˜ŸæœŸ<br>
                    ç¤ºä¾‹ï¼š<br>
                    â€¢ 0 9 * * * - æ¯å¤© 09:00<br>
                    â€¢ 0 9 1 * * - æ¯æœˆ 1 å· 09:00<br>
                    â€¢ 0 9 * * 1 - æ¯å‘¨ä¸€ 09:00<br>
                    â€¢ */10 * * * * - æ¯ 10 åˆ†é’Ÿ
                </small>
            </div>
            <button class="btn btn-primary" onclick="createNote()">åˆ›å»ºç¬”è®°</button>
        </div>

        <!-- ç¬”è®°åˆ—è¡¨ -->
        <div class="notes-list">
            <h3>ğŸ“š æˆ‘çš„ç¬”è®°</h3>

            <!-- æœç´¢å’Œè¿‡æ»¤ -->
            <div class="config-panel" style="margin-bottom: 20px;">
                <div class="form-group">
                    <label>ğŸ” æœç´¢ç¬”è®°</label>
                    <input type="text" id="searchKeyword" placeholder="æœç´¢æ ‡é¢˜æˆ–å†…å®¹..." oninput="searchNotes()">
                </div>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="showAllNotes()">æ˜¾ç¤ºå…¨éƒ¨</button>
                    <button class="btn btn-success" onclick="showEnabledOnly()">ä»…æ˜¾ç¤ºå¯ç”¨æé†’</button>
                    <button class="btn btn-warning" onclick="showMergedOnly()">ä»…æ˜¾ç¤ºåˆå¹¶æé†’</button>
                </div>
            </div>

            <div id="notesList">
                <div class="loading">åŠ è½½ä¸­...</div>
            </div>
        </div>
    </div>

    <!-- ç¼–è¾‘æ¨¡æ€æ¡† -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ç¼–è¾‘ç¬”è®°</h2>
                <span class="close" onclick="closeEditModal()">&times;</span>
            </div>
            <div class="form-group">
                <label>æ ‡é¢˜</label>
                <input type="text" id="editTitle">
            </div>
            <div class="form-group">
                <label>å†…å®¹</label>
                <textarea id="editContent"></textarea>
            </div>
            <div class="form-group">
                <label>åˆ†ç±»</label>
                <select id="editCategory">
                    <option value="todo">å¾…åŠäº‹é¡¹</option>
                    <option value="study">å­¦ä¹ ç¬”è®°</option>
                    <option value="work">å·¥ä½œç›¸å…³</option>
                    <option value="life">ç”Ÿæ´»æ‚è®°</option>
                    <option value="other">å…¶ä»–</option>
                </select>
            </div>
            <div class="form-group">
                <label>ä¼˜å…ˆçº§</label>
                <select id="editPriority">
                    <option value="1">1 - å¾ˆä½</option>
                    <option value="2">2 - è¾ƒä½</option>
                    <option value="3">3 - ä¸­ç­‰</option>
                    <option value="4">4 - è¾ƒé«˜</option>
                    <option value="5">5 - å¾ˆé«˜</option>
                </select>
            </div>
            <div class="form-group">
                <label>æé†’æ–¹å¼</label>
                <select id="editRemindType" onchange="toggleRemindType('edit')">
                    <option value="times">æŒ‰æ—¶é—´ç‚¹æé†’</option>
                    <option value="cron">æŒ‰ Cron è¡¨è¾¾å¼æé†’</option>
                </select>
            </div>
            <div class="form-group" id="editRemindTimesGroup">
                <label>æé†’æ—¶é—´ï¼ˆå¤šä¸ªæ—¶é—´ç”¨é€—å·åˆ†éš”ï¼‰</label>
                <input type="text" id="editRemindTimes" placeholder="08:10, 12:30, 20:00">
                <small style="color: #718096;">æ ¼å¼ï¼šHH:MMï¼Œå¦‚ï¼š08:10, 12:30, 20:00</small>
            </div>
            <div class="form-group" id="editCronGroup" style="display: none;">
                <label>Cron è¡¨è¾¾å¼</label>
                <input type="text" id="editCronExpression" placeholder="0 9 1 * *">
                <small style="color: #718096;">
                    æ ¼å¼ï¼šåˆ†é’Ÿ å°æ—¶ æ—¥æœŸ æœˆä»½ æ˜ŸæœŸ<br>
                    ç¤ºä¾‹ï¼š0 9 1 * * - æ¯æœˆ 1 å· 09:00
                </small>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="editEnableRemind"> å¯ç”¨æé†’
                </label>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="editMergeRemind"> åˆå¹¶æé†’
                </label>
            </div>
            <button class="btn btn-primary" onclick="updateNote()">ä¿å­˜ä¿®æ”¹</button>
        </div>
    </div>

    <script src="app_card.js?v=20260120"></script>
</body>

</html>